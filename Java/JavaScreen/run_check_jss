#! /bin/csh -f

############################################################

# This file is just to get the path, etc., set up right to run check_jspop
# from cron.  It also fixes the problem that output from cron jobs
# is not mailed in some versions of Solaris.

#-----------------------------------------------------------

# $Id$

############################################################

set path = ( . /usr/ucb /bin /p/devise/run /s/std/bin $path )

set jspopHost = 'localhost'
if ($#argv > 0) then
  set jspopHost = $1
endif

set outfile = /tmp/run_check.out

if (-e $outfile) then
    rm $outfile
endif

./check_jss $jspopHost >& $outfile

# All this garbage because Sun's current crond on Intel/Solaris won't
# send mail correctly.
if (-e $outfile && ! -z $outfile) then
    cat $outfile | mail -s "Error message from check_jspop on `hostname`" `whoami`
endif

touch /tmp/normal_js_check
