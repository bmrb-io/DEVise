<!--
  ========================================================================
  DEVise Data Visualization Software
  (c) Copyright 2007-2008
  By the DEVise Development Group
  Madison, Wisconsin
  All Rights Reserved.
  ========================================================================

  Under no circumstances is this software to be copied, distributed,
  or altered in any way without prior permission from the DEVise
  Development Group.
-->

<!--
  $Id$
-->

<HTML>
<HEAD>
<TITLE>DEVise JavaScreen Help</TITLE>
</HEAD>

<body background="../logo_background.gif">

<center>
<h1>
DEVise JavaScreen Help
</h1>
<h3>
v5.9.4
</h3>
</center>

<h3>
<a href="#General">
General</a>
</h3>

<h3>
<a href="#Toolbar">
Toolbar</a>
</h3>

<h3>
<a href="#Keyboard">
Keyboard shortcuts</a>
</h3>


<h3>
<a href="#History">
Version history</a>
</h3>


<hr>

<a name="General">
<h2>
General
</h2>

<p>
The DEVise (Data Exploration and Visualization) JavaScreen is a Java
applet that allows users to interactively explore complex data sets.
The JavaScreen applet connects to a DEVise server, which renders most
images the user sees.  This allows large data sets to be visualized
without transmitting the full data set to the client applet.
</p>

<p>
Note that a full explanation of DEVise is beyond the scope of this
help document.  This document will focus on the areas useful to the
average user of the DEVise JavaScreen.
</p>

<h3>
Views
</h3>
<p>
The <em>view</em> is the fundamental component of DEVise.  A view is an
area of the screen within which symbols are displayed, with each symbol
corresponding to a record in the underlying data.  One key property of
a view is the axis ranges (which are in effect even if axes are not
displayed in the view).  Data outside the current axis ranges is not
displayed.  (Note that three-dimensional views are somewhat different
in this respect.)
</p>

<p>
One of the most important features of views is that, in most cases,
you can change the axis ranges by dragging with the mouse or by
other actions.  (See the "toolbar" and "keyboard shortcuts" sections
below for specific information on how this is done.)  Some views have
their axis ranges "locked", to prevent changes that would render
the visualization less usable.  In some visualizations, several views
have their axis ranges "linked", so that zooming in or out in one
view will also zoom correspondingly in other views.
</p>

<h3>
DEVise Cursors
</h3>
<p>
The <em>DEVise Cursor</em> is a rectangular "box" within a view.  The
box can be moved (and in many cases, resized) by dragging
it with the mouse.  When you do this, "behind the scenes" connections
will change another part of the visualization.  In some cases, a DEVise
cursor is used to select a region that is magnified in another view
(this is probably the most obvious case).  However, there are other uses
of DEVise cursors, such as selecting which of a number of data sets
to display.
</p>

<p>
A cursor can also be moved by clicking with the mouse on the place to
which the center of the cursor should be moved.  (This works even if
the cursor is not within the view because the view's axis ranges were
changed.)
</p>

<p>
Most DEVise visualizations are designed to be explored mainly by
moving and resizing the DEVise cursors.
</p>


<hr>

<a name="Toolbar">
<h2>
Toolbar
</h2>

<p>
The Toolbar (located at the left edge of the JavaScreen) allows you
to select from a number of different modes.  These modes change the
behavior of the JavaScreen as described below.  In general, in order to
perform a given action you have to select the appropriate toolbar
mode, and then click or drag in the view that is to be affected.
When you enter a given toolbar mode, the mouse cursor changes to
reflect the current mode.
</p>

<p>
Note that some views may not allow all toolbar actions.  In such cases,
the mouse cursor will change to a no-op cursor.  Also, at this time,
the toolbar only has an effect on two-dimensional views.
</p>

<ul>
<li> <img src="drill-down.default.png">
<b>Drill down (show data records)</b>:  in this toolbar mode, if you
click on a data symbol, the location of the click (in data units) and the
data associated with the symbol will be displayed.  If multiple data
symbols overlap or are very close together, the drill-down dialog will
show the data corresponding to all of the symbols.  If you click in an
area in which there is no symbol, only the location of the click will be
displayed.

<li> <img src="show_view_help.default.png">
<b>Show help for selected view</b>:  in this toolbar mode, if you
click anywhere in a view, the help message for that view (if any) will
be shown.

<li> <img src="crosshairs.default.png">
<b>Select cursor/zoom in XY/3D rotate</b>:  this is the "normal"
toolbar mode.  In this mode, you can drag or resize a DEVise cursor
(if the mouse cursor is on a DEVise cursor).  If you are not on a cursor
in a two-dimensional view, dragging with the mouse will zoom in on both
the X and Y axes (unless modified by keyboard shortcuts, see below).
In a three-dimensional view, dragging with the mouse will rotate the
structure (unless modified by keyboard shortcuts, see below).
Also, a single-click in a view with a cursor will move the cursor to
the mouse location.  If there are multiple cursors in the view, only
one will be moved.

<li> <img src="full_screen_filter.default.png">
<b>Expand DEVise cursor to fill view</b>:  in this toolbar mode, if
you click anywhere in a view containing a DEVise cursor, the DEVise
cursor in the view will be expanded (or contracted) to the dimensions of
view axes.  If there are multiple cursors in the view, only one will
be resized.

<li> <img src="increase_symbol_size.default.png">
<b>Increase symbol size</b>: for some symbol types, the size can
be varied.  In this toolbar mode, clicking in a view with such symbols
will increase the symbol size.

<li> <img src="decrease_symbol_size.default.png">
<b>Decrease symbol size</b>: for some symbol types, the size can
be varied.  In this toolbar mode, clicking in a view with such symbols
will decrease the symbol size.  Note that the symbols cannot be made
smaller than the "default" size, so the symbols will only be reduced
in size if they have already been increased from the default.

<li> <img src="home_filter.default.png">
<b>Home (show all data)</b>: in this toolbar mode, clicking in a
view will set the view's axis ranges to the "home" setting.  In most
cases, this means that the view will be expanded (or contracted) to
exactly the ranges required to show all data in the view.  In some
cases, there is a pre-defined home setting different than this default.
Note that if the view is already at the "home" setting, performing this
operation again will have no effect.

<li> <img src="toggle_filter.default.png">
<b>Toggle axis ranges</b>: in this toolbar mode, clicking in a view
will toggle back and forth between the last two sets of axis ranges.

<li> <img src="zoom_in-all.default.png">
<b>Zoom in XY</b>:  in this toolbar mode, dragging with the mouse
zooms in on both the X and Y axes.  Single-clicking zooms in on
both axes by a factor of two.

<li> <img src="zoom_in-x.default.png">
<b>Zoom in X</b>: in this toolbar mode, dragging with the mouse
zooms in on the X axis only.  Single-clicking zooms in on the X axis
by a factor of two.

<li> <img src="zoom_out-all.default.png">
<b>Zoom out XY</b>: in this toolbar mode, dragging with the mouse
zooms out on both the X and Y axes.  Single-clicking zooms out on
both axes by a factor of two.

<li> <img src="zoom_out-x.default.png">
<b>Zoom out X</b>: in this toolbar mode, dragging with the mouse
zooms out on the X axis only.  Single-clicking zooms out on the X
axis by a factor of two.
</ul>

<hr>

<a name="Keyboard">
<h2>
Keyboard shortcuts
</h2>

<p>
Keyboard shortcuts are used by pressing the key while the mouse cursor
is in the appropriate view.  You do not have to select the view before
pressing the key.
</p>

<h3>General Shortcuts</h3>
<ul>
<li><b>Escape</b>: reset to default toolbar mode
</ul>

<h3>Axis Range Shortcuts</h3>
<ul>
<li><b>1</b> or <b>End</b>: zoom in on Y axis
<li><b>2</b> or <b>down arrow</b>: move the Y axis range down
<li><b>3</b> or <b>Page Down</b>: zoom out on Y axis
<li><b>4</b> or <b>left arrow</b>: move the X axis range left
<li><b>5</b>: set the axis ranges to the "home" location (the default is to
  show all data)
<li><b>6</b> or <b>right arrow</b>: move the X axis range right
<li><b>7</b> or <b>Home</b>: zoom in on X axis
<li><b>8</b> or <b>up arrow</b>: move the Y axis range up
<li><b>9</b> or <b>Page Up</b>: zoom out on X axis
<li><b>Backspace</b>: toggle between the last two axis range settings
<li><b>c</b> or <b>C</b>: fit cursor to current axis ranges (cursor fills
  view)
</ul>

<h3>2D Mouse Actions</h3>
In normal toolbar mode only.
<ul>
<li><b>Click</b>: select view and move cursor (if view contains a cursor)
<li><b>Drag</b>: move cursor (if on a cursor) or zoom in
<li><b>Control-drag</b>: X-only zoom (if not on a cursor)
<!--
<li><b>Alt-drag</b>: zoom out (if not on a cursor)
<li><b>Shift-drag</b>: zoom out (same as Alt-drag)
<li><b>Shift-click</b>: show data records, if any, at mouse location
-->
<li><b>F1</b>: toggle display of help information for the current view
<!-- TEMP -- Control-drag on a cursor is supposed to move the cursor
  without talking to the devised, but this doesn't seem to work anymore -->
</ul>

<h3>3D Mouse Actions, Jmol view</h3>
<p>
Note that a Jmol view is one that shows both atoms and bonds.
</p>
<ul>
<li><b>Left drag</b>: rotate object
<li><b>Left click on atom (in drill-down toolbar mode)</b>: drill down (show
  associated record values)
<li><b>Control-right drag</b>: move object
<li><b>Right click</b>: show Jmol popup menu
<li><b>Control-left click</b>: show Jmol popup menu
<li><b>Double-left click on atom</b>: go into distance measurement mode
<li><b>Shift-drag, left/right</b>: rotate object in the plane of the screen
<li><b>Shift-drag, up/down</b>: zoom in (move mouse down) or out (move
  mouse up)
<li><b>Alt-drag</b>: same as shift-drag
<li><b>Scroll wheel</b>: zoom in (scroll down) or out (scroll up)
</ul>

<h3>3D Mouse Actions, non-Jmol view</h3>
<ul>
<li><b>Left drag</b>: rotate object
<li><b>Control-drag</b>: zoom in (move mouse down) or out (move mouse up)
<li><b>Alt-drag</b>: move object
<li><b>Shift-drag</b>: move object (same as Alt-drag)
</ul>

<h3>Other 3D Shortcuts, non-Jmol view</h3>
<ul>
<li><b>r</b> or <b>R</b>: reset coordinate system to default
</ul>



<h3>Symbol Display Shortcuts</h3>
<p>
2D views only.
</p>
<ul>
<li><b>+</b>: increase symbol size
<li><b>-</b>: decrease symbol size
<li><b>v</b> or <b>V</b>: toggle display of data values as text superimposed on symbols
<li><b>s</b> or <b>S</b>: toggle display of symbols (disabled)
</ul>


<!-- I'm not sure exactly what these do -- RKW 1999-04-01
<h3>View Lock Shortcuts</h3>
<ul>
<li><b>alt:7</b> or <b>alt:Home</b> (toggle view locks upper left)
<li><b>alt:9</b> or <b>alt:Page Up</b> (toggle view locks upper right)
<li><b>alt:1</b> or <b>alt:End</b> (toggle view locks lower left)
<li><b>alt:3</b> or <b>alt:Page Down</b> (toggle view locks lower right)
<li><b>alt:4</b> or <b>alt:left arrow</b> (toggle view locks Y size)
<li><b>alt:2</b> or <b>alt:down arrow</b> (toggle view locks X size)
</ul>
-->


<!-- I'm not sure exactly what these do -- RKW 1999-04-01
<h3>Miscellaneous Shortcuts</h3>
<ul>
<li><b>h</b> or <b>H</b>: set histogram width to filter
# TEMP this doesn't apply to JavaScreen
<li><b>escape</b> or <b>menu</b> (raise control panel)
# TEMP this doesn't apply to JavaScreen
<li><b>ctl:C</b> terminate DEVise
</ul>
-->

<hr>

<a name="History">
<h2>
Version history
</h2>

<h3>
Version 5.9.4
</h3>

<ul>

<li>(Nothing yet.)

<h3>
Version 5.9.3
</h3>

<ul>

<li>Added a new level (for entity assemblies) to the 3D visualization
structure selection trees.

<li>Escape now resets the toolbar to the default mode.

<li>There is now a minimum delay when communicating with the server,
to make it apparent to the user that something has actually happened
(for example, when they do home on a view that is already in the home
state).  The default minimum delay is 1500 ms; this can be changed
with the minwaittime applet parameter.

<!-- Bug 939 -->
<li>Fixed a bug that caused slight zooming out on the edge of a view
if the mouse cursor goes outside the data area of the view when
dragging the zoom box.

<li>Fixed some off-by-one-pixel errors in zoom box drawing.

</ul>

<h3>
Version 5.9.2
</h3>

<ul>

<!-- Bug 968 -->
<li>Fixed a bug that caused it to be impossible to move a cursor that's
entirely outside the axis ranges of its view.

</ul>

<h3>
Version 5.9.1
</h3>

<ul>

<li>Disabled alt and shift mouse action modifiers in 2D views to prevent
confusion (often caused by the JavaScreen not receiving key-up events
from browsers).

<li>Moved the JavaScreen version history to the help page.

</ul>

<h3>
JavaScreen 5.9.0
</h3>

<ul>

<li>The JavaScreen now has a toolbar that provides an alternate way of
performing a number of functions that previously could only be performed
by key actions.

<li>Added fairly extensive help information to the JavaScreen.

<li>The code for loading icon images, etc., has now been improved and
works universally for running from both jar files and individual
class and image files.

<li>Added a button to show the Jmol selection trees without having to
go into a menu.

<li>The JavaScreen now prints various useful information, such as the
Java version, OS version, etc., at the beginning of the Program
Information log.

<li>Configuration for the Florence mirror has been updated.

<li>Fixed JavaScreen startup scripts to deal with new dynamic libraries
in CentOS.

</ul>


<h3>
JavaScreen 5.8.2.1
</h3>

<ul>

<li>Fixed a bug (954) that caused the JavaScreen to lock up the browser
when leaving the JS page, if the Java plugin was version 1.6.

</ul>


<h3>
JavaScreen 5.8.2
</h3>

<ul>

<li>Moved status lights and mouse location info to the bottom of the window
for cleaner appearance.

<li>The background color of the entire view area (the "screen background"
color) is slightly contrasting.

<li>Added the sbgcolor applet parameter to set the "screen background" color,
since this is now more prominent.

<li>Added some extra GUI-thread-related diagnostic output.

</ul>


<h3>
JavaScreen 5.8.1
</h3>

<ul>

<li>Fixed (or at least reduced) the lockup problems seen in 5.8.0.

</ul>


<h3>
JavaScreen 5.8.0
</h3>

<ul>

<li>Completely changed the JavaScreen color scheme and some other
aspects of its appearance, to a more clean, modern look.

<li>Changed applet parameter names for colors from "fgcolor" and "bgcolor"
to "fgcolor2" and "bgcolor2" so existing web pages don't override
the colors.

<li>Structure selection tree window now comes up closer to the upper
left corner of the screen in Jmol visualizations.

<li>Added client-only install option.

</ul>


<h3>
JavaScreen 5.7.2
</h3>

<ul>

<li>Added the capability to disable drill-down in Jmol views (to avoid
accidental drill-down).

<li>Updated configuration for NMRFAM.

<li>Set things up so that "special" arguments (e.g., font path) to
Xvfb are configurable.

</ul>


<h3>
JavaScreen 5.7.1
</h3>
<p>
(With DEVise 1.9.0)
</p>

<ul>

<li>Added drill-down capability in Jmol views.

<li>Added the capability to have a description that's different from
the associated URL in the JavaScreen drill-down dialog (the value
must be of the form "{description}{url}".

<li>Added the capability to have attributes that don't show up in
the JavaScreen drill-down dialog (the attribute name must end with
"_nodd").

<li>Added "clickable URL in JavaScreen drill-down dialog" feature
(attribute name must end with "_url").

<li>Added Jmol version to the JavaScreen Option dialog.
</ul>


<h3>
JavaScreen 5.7.0
</h3>
<p>
(With DEVise 1.9.0.)
</p>

<ul>

<li>Added the option to render 3D molecules with Jmol:
- Jmol is embedded within the JavaScreen.
- Added Jmol menus to the JavaScreen menu bar.
- Added trees to select which atoms are shown and highlighted within
  Jmol.

<li>Improved fonts -- larger, buttons/menus are now sans-serif.

<li>A number of improvements to debug logging and restarts.

<li>Added timestamps to many more items in the JSPoP debug output.

<li>A bunch of changes to improve restart logging, etc.:

  <ul>
  <li>Better error messages in jss.java.
  <li>Set maximum memory for all production Java server processes to
    256 MB (because of weird problems on marlin.bmrb.wisc.edu).
  <li>DEVise.jspop and DEVise.jspop.loc send all start_devised output to
    a log file instead of to /dev/null.
  <li>check_jspop now puts check_connect.err.* in logs and doesn't
    delete it when there's an error.
  <li>run_check puts <em>starting</em> timestamp at beginning of output, saves
    output from failed tests to logs.
  <li>start_devised generates more output, now that it's being saved.
  <li>Better error messages from check_jsall, check_jspop, and check_jss.
  </ul>

</ul>


<h3>
JavaScreen 5.6.1
</h3>

<ul>

<li>Fixed JavaScreen client problems related to bug 992 (drill-down on
empty data source crashes DEVise).

</ul>


<h3>
JavaScreen 5.6.0
</h3>
<p>
(With DEVise 1.8.0.)
</p>

<p>
(Entries below here also included in 5.7.0.)
</p>

<ul>
<li>JS now sends 3D coordinate updates only when it really needs to
(when it's a collaboration leader).

<li>Changed configuration for "regular" and "wavelet" JavaScreens
to kill Xvfb (since most of the JSPoP restarts these days seem
to be because Xvfb gets goofed up).

<li>Changed the subject of error emails from run_check to put the
JS ID and machine name closer to the beginning, so they show up
better.

<li>Changed JavaScreen scripts from sh to bash because of problems
at Osaka -- their sh didn't accept the -e test.

</ul>


<h3>
JavaScreen 5.5.2
</h3>
<p>
(With DEVise 1.7.19.)
</p>

<ul>

<li>Check_jspop now always deletes the check_connect.err.* file.

<li>Improvements to JS usage statistics script: now deals with the fact
that the logs seem to be in local time instead of GMT; error messages
if parsing time fails; prints a warning if there's no JSPoP pid file.

<li>Changed JavaScreen config files to work on teal instead of pumori.

<li>Run_check now touches a file in /tmp/.X11-unix to make sure that
directory stays "fresh" and doesn't get deleted.

<li>Added dev_vis.loc for JS to use local sessions, etc., that
come with standard DEVise distribution; DEVise.jspop script
makes the "base" session temp directory.

<li>Added config file for BMRB Italy mirror.

<li>Added DEVise.jspop.loc that runs with the "local" sessions, etc.

<li>Added scripts to report JS usage on teal.

<li>We now exclude any host name *starting* with localhost from the
"real" session open statistics.

<li>Added new options to JavaScreen configuration so we don't have
to rely on there being a /p/devise.

<li>New config file for framenet.cs.wisc.edu (new server).

<li>Added JS usage script for framenet.

<li>Got DEVise/JavaScreen to work on basslet by turning off hangCheck.

<li>More improvements to the JSPoP debug logging.

<li>A possible fix to some of the JSPoP hangs we've been experiencing.

<li>More fixes relating to the JSPoP hanging problems on pumori.

<li>More diagnostic output.

<li>More JSPoP reliability improvements.

<li>JSPoP reliability improvements (no longer experimental).

</ul>


<h3>
JavaScreen 5.5.1
</h3>
<p>
(With DEVise 1.7.18?)
</p>

<ul>

<li>Much-improved JSPoP debug logging capabilities.

<li>Removed DEViseJSLoader references from html files, jsa or jsb is now
loaded directly (fixes "half-screen" problem seen on Windows).

</ul>


<h3>
JavaScreen 5.5.0
</h3>

<ul>

<li>Restart_jspop gives an explicit error message if there's no bin2
directory.

<li>"Option" dialog now displays JSPoP and DEVise version, and JSPoP ID.

<li>JSPoP prints version and arguments to log file at startup.

<li>New version of JavaScreen usage stats script gets info from
jspop.usage.* files, gives non-UW counts.

<li>Fixed a collaboration bug (race condition could cause a wrong command
to get sent to the devised).

<li>Support for alternate colors for printing.

<li>Changed most buttons in the JavaScreen GUI to menus (to save space
in preparation for adding new functionality).

<li>We now report the system's uptime on a JSPoP restart, so we can tell
when restarts are triggered by system reboots.

<li>Non-applet JS now continues without dialog if it can't get the animation
symbols.

<li>Fixed bug 889 (erroneous JSPoP restarts seen at BMRB because hostname
lookup took an extremely long time).

<li>(Temporary) Extra debug output to try to track down recent JSPoP
restarts.

</ul>


<h3>
JavaScreen 5.4.2
</h3>

<ul>

<li>Non-applet JS now continues without dialog if it can't get the animation
symbols.

<li>Fixed bug 889 (erroneous JSPoP restarts seen at BMRB because hostname
lookup took an extremely long time).

</ul>


<h3>
JavaScreen 5.4.0
</h3>

<ul>

<li>Restart_jspop gives an explicit error message if there's no bin2
directory.

<li>"Option" dialog now displays JSPoP and DEVise version, and JSPoP ID.

<li>JSPoP prints version and arguments to log file at startup.

<li>New version of JavaScreen usage stats script gets info from
jspop.usage.* files, gives non-UW counts.

<li>Fixed a collaboration bug (race condition could cause a wrong command
to get sent to the devised).

</ul>


<h3>
JavaScreen 5.3.0
</h3>
<p>
(With DEVise 1.7.15?)
</p>

<ul>

<li>JSPoP (but not JSS or DEVised) now use a new CircularLog class, so the
log file doesn't grow out of control.

<li>Session opens are now logged in a separate JS usage log.

<li>All sessions with any hidden directories in their paths are now
hidden in the session lists returned to the JavaScreen (for  (for BMRB
visualization server -- allows a session in a hidden directory to
be opened by passing in the name, but then the user can't see any
other sessions in that directory).

<li>There is now a configuration option to kill Xvfb when killing the
JSS (to deal with the problem that once in a while Xvfb gets itself
goofed up and you cannot successfully restart the DEViseds unless you
kill Xvfb first).

<li>Fixed bug 872 (double append to path in JS open session dialog).

<li>Minor improvements to the debug logs.

<li>Added closeSession() and openSession() methods to the JS applet for
Wavelet-IDR.

<li>Added id, directory, and hostname header to JS usage stats.

<li>JSPoP debug log improvements to try to track down the cause of some
DEVised restarts.

<li>JSPoP (but not JSS or DEVised) now use a new CircularLog class, so the
log file doesn't grow out of control.

<li>Session opens are now logged in a separate JS usage log.

<li>Changed JavaScreen scripts so things work even if the user has
CLASSPATH defined; restart_jspop gives warning if sleeping because
of lock file.

<li>jss_savepid *always* tries to start Xvfb, in case the file in
/tmp/.X11-unix is there in error; got rid of path stuff in run_check.

<li>Added closeSession() and openSession() wrapper methods to
DEViseJSLoader (should have done that before).

</ul>


<h3>
JavaScreen 5.2.2
</h3>

<ul>

<li>Fixed bugs relating to axis drawing with axis multiplication factors
other than 1.

<li>Made refreshAllData() and restartSession() methods in DEViseJSLoader,
so that the Wavelet-IDR JavaScript code can call them.

<li>Fixed problems with JSPoP restarts overlapping.

<li>Script fixes so BMRB mirror sites can generate JS usage stats.

<li>Various updates to the BMRB mirror site installation instructions,
including info on setting up the JS usage statistics.

<li>Fixed bug 866 (JSPoP hangs on bad collaboration name from follower).

<li>Fixed bug 870 (JS follower crash goofs up leader also).

<li>Made JS invisibility destruction timeout configurable; fixed some other
problems with loading and re-loading the applet.

<li>JavaScreen startup scripts now set DEVised fontkludge argument
automatically.

<li>Eliminated or reduced "Abrupt end of input stream reached" errors in
the JSPoP on normal client exit.

</ul>

<hr>

<p>
If you have any trouble using this software, please contact 
<a href="mailto:devise-sup@cs.wisc.edu">devise-sup@cs.wisc.edu</a>
</p>

<p>
<i>Last updated 2008-03-05.</i>
</p>

</BODY>
</HTML>
