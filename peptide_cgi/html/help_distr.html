<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>Distance Restraints Help Page</title>
<link REL="stylesheet" TYPE="text/css" HREF="visualization.css" TITLE="main stylesheet">
</head>

<h2>Distance Restraints</h2>

<p>
This visualization shows the 3D structure of the relevant molecule,
in combination with distance restraints.
</p>

<p>
Sections of this document:
</p>

<ul>
<li><a href="#main_window">Main window</a>
<li><a href="#restraint_selection">Restraint selection</a>
<li><a href="#main_window_v02">Main window (violations > 0.02 A)</a>
<li><a href="#main_window_nv">Main window (non-violated only)</a>
<li><a href="#main_window_closeup">Main window (structure closeup)</a>
<li><a href="#structure_selection">Structure selection window</a>
<li><a href="#js_menubar_jmol">JavaScreen menubar Jmol menu</a>
<li><a href="#jmol_popup_menu">Jmol popup menu</a>
<li><a href="#jmol_mouse">Jmol mouse functions</a>
</ul>


<hr>

<a name="main_window"></a>
<h3>Main Visualization Window</h3>

<p>
The visualization is laid out as shown below; the view names are
referred to in the text.
</p>

<p>
<center>
<img src="distr_main.png">
</center>
</p>

<p>
The <strong>structure (main) view</strong> shows the 3D structure
(rendered by <a href="http://jmol.sourceforge.net/">Jmol</a>).
Note that you can control many options in the structure view with the
popup menus in that view and the Jmol menu in the JavaScreen menu bar.
For distance restraints, the 3D display defaults to wireframe mode, but
you can change it to other modes using the Jmol menus.  Restraints are
drawn in this view according to the selections in the
<a href="#ea_select_view">entity assembly select view</a>, the
<a href="#vio_select_view">violation select view</a>, the
<a href="#ambig_select_view">ambiguity select view</a>, the
<a href="#length_select_view">restraint length select view</a>, the
<a href="#data_view">data view</a>, and the
<a href="#violation_magnitude_view">violation magnitude view</a>
(see <a href="#restraint_selection">restraint selection</a> below).
</p>

<p>
Note that for restraints with pseudoatoms, a line is drawn for each
possible "real" atom at each end of the restraint.
</p>

<p>
Restraints are colored as follows:
</p>

<table border="1">
<caption>
<strong>
Restraint colors
</strong>
</caption>
  <tr>
    <th>
      Type
    </th>
    <th>
      Color
    </th>
  </tr>
  <tr>
    <td>
      Non-violated, non-ambiguous
    </td>
    <td>
      Yellow
    </td>
  </tr>
  <tr>
    <td>
      Violated, non-ambiguous
    </td>
    <td>
      Orange
    </td>
  </tr>
  <tr>
    <td>
      Non-violated, ambiguous
    </td>
    <td>
      Cyan
    </td>
  </tr>
  <tr>
    <td>
      Violated, ambiguous
    </td>
    <td>
      Magenta
    </td>
  </tr>
</table>


<p>
Any atoms selected in the the <a href="#atom_select_tree">
atom select tree</a> (see below) are highlighted in green.  You have
the option
of highlighting the atoms with a "selection halo" or by coloring the
atoms or bonds themselves (Jmol->View->Highlight in the menu bar).
Atoms or bonds not colored for highlighting are colored as follows:
</p>

<table border="1">
<caption>
<strong>
Atom type colors
</strong>
</caption>
  <tr>
    <th>
      Element
    </th>
    <th>
      Color
    </th>
  </tr>
  <tr>
    <td>
      Carbon
    </td>
    <td>
      Gray
    </td>
  </tr>
  <tr>
    <td>
      Hydrogen
    </td>
    <td>
      White
    </td>
  </tr>
  <tr>
    <td>
      Oxygen
    </td>
    <td>
      Red
    </td>
  </tr>
  <tr>
    <td>
      Nitrogen
    </td>
    <td>
      Blue
    </td>
  </tr>
  <tr>
    <td>
      Sulfur
    </td>
    <td>
      Yellow
    </td>
  </tr>
  <tr>
    <td>
      Phosphorus
    </td>
    <td>
      Orange
    </td>
  </tr>
</table>

<p>
The <strong>atom color legend</strong> shows the colors for
the elements.
</p>

<a name="data_view"></a>
<p>
The <strong>data view</strong> shows the number of restraints per
residue, given the selection in the
<a href="#ea_select_view">entity assembly select view</a>, the
<a href="#vio_select_view">violation select view</a>, the
<a href="#ambig_select_view">ambiguity select view</a>, and the
<a href="#length_select_view">restraint length select view</a>.
The DEVise cursor in this view selects residues according
to the data values -- a residue for which the red tip of the bar
is enclosed in the cursor is selected.
</p>

<a name="violation_magnitude_view"></a>
<p>
The <strong>violation magnitude view</strong> shows the magnitude
of the violation for each restraint selected by the 
<a href="#ea_select_view">entity assembly select view</a>, the
<a href="#vio_select_view">violation select view</a>, the
<a href="#ambig_select_view">ambiguity select view</a>, the
<a href="#length_select_view">restraint length select view</a>, and the
<a href="#data_view">data view</a>.
The DEVise cursor in this view selects the restraints to be shown in
the <strong>structure (main) view</strong>.
</p>

<p>
The <strong>data scroll view</strong> scrolls the X axis of the data
view.  The DEVise cursor selects the range of residues shown in the data view
-- you can drag the entire cursor, or drag the left or right edge to
change its size.
</p>

<a name="ea_select_view"></a>
<p>
The <strong>entity assembly select view</strong> selects the entity
assembly for which data is shown in the <strong>data view</strong>.
If the entry being visualized has only one entity assembly, this view has
no effect.
</p>

<a name="vio_select_view"></a>
<p>
The <strong>violation select view</strong> selects the violation state
for which data is shown in the <strong>data view</strong>.  If
this entry has no data on violations, only the option "all" is shown.
</p>

<a name="ambig_select_view"></a>
<p>
The <strong>ambiguity select view</strong> selects the ambiguity state
for which data is shown in the <strong>data view</strong>.  If
this entry has no data on ambiguities, only the option "all" is shown.
</p>

<a name="length_select_view"></a>
<p>
The <strong>restraint length select view</strong> selects the length of
restraint for which data is shown in the <strong>data view</strong>.
</p>

<p>
The <strong>info view</strong> shows the BMRB accession number and
PDB ID, and the generation date of the visualization; show
the view help (F1 key) to see the Peptide-CGI version and exact
generation timestamp.
</p>


<a name="restraint_selection"></a>
<h3>Restraint Selection</h3>

<p>
There is a multi-step process to select which restraints are actually
shown in the <strong>structure view</strong>.  First, the cursors in
the <strong>entity assembly view</strong>, <strong>violation select
view</strong>, <strong>ambiguity select view</strong>, and
<strong>restraint length select view</strong> determine which violations
are counted for each residue in the <strong>data view</strong>.  Then,
the cursor in the <strong>data view</strong> determines which restraints
are shown in the <strong>violation magnitude view</strong>.  Finally,
the cursor in that view determines which restraints are actually shown
in the <strong>structure view</strong>.  This sequence of selections
is represented graphically below.
</p>

<p>
<center>
<img src="distr_selection.png">
</center>
</p>

<a name="main_window_v02"></a>
<h3>Main Visualization Window (violations > 0.02 A)</h3>

The image below shows the use of the <strong>violation magnitude
view</strong> to select only restraints with a violation of greater
than approximately 0.02 angstroms.

<p>
<center>
<img src="distr_main_v02.png">
</center>
</p>

<a name="main_window_nv"></a>
<h3>Main Visualization Window (non-violated only)</h3>

The image below shows what happens when only non-violated restraints
are selected in the <strong>violation select view</strong>.  You can
see that only maxiumum violations of 0 show up in the <strong>violation
magnitude view</strong>.

<p>
<center>
<img src="distr_main_nv.png">
</center>
</p>

<a name="main_window_closeup"></a>
<h3>Main Visualization Window (structure closeup)</h3>

<p>
This image shows both the <strong>structure view</strong> and the
<strong>data view</strong> zoomed in to show a finer level of detail.
Note that the cursor in the data view is forced to be entirely within
the view, so zooming in may shrink the cursor.
</p>

<p>
<center>
<img src="distr_closeup.png">
</center>
</p>


<a name="structure_selection"></a>
<h3>Structure Selection Window</h3>

<p>
Selection of which atoms to display and highlight is done in a
separate window, to allow more space in the main window to be used for
the structure view and data view.
</p>

<p>
<center>
<img src="coordinate_vis_select.png">
</center>
</p>

<p>
The <strong>structure type tree</strong> selects which atoms are shown
in the structure view by structure type (backbone, backbone and side chains,
or backbone, side chains, and hydrogens).  Changing what's selected in
this tree also changes what is displayed in the atom display tree and
the atom select tree.  Note that if, for example, you elect not to
display side chain protons, then no restraints involving side chain
protons will be displayed.
</p>

<p>
The <strong>atom display tree</strong> selects which atoms are displayed
in the structure view.  The atom display tree allows selection of the entire
molecule, or parts of the molecule by residue and individual atom.
Changing what's selected in this tree also changes what is displayed
in the atom select tree.  Note that if an atom is not displayed, any
restraints involving that atom are not displayed.
</p>

<a name="atom_select_tree"></a>
<p>
The <strong>atom select tree</strong> enables you to select entities,
residues, and atoms to be highlighted in the 3D view.
The atom select tree allows selection of the entire
molecule, or parts of the molecule by residue and individual atom.
The Reset button sets the selection in the tree back to the atoms
selected in the data view.
</p>

<a name="js_menubar_jmol"></a>
<h3>JavaScreen Menubar Jmol Menu</h3>

<p>
Left-clicking the Jmol button in the JavaScreen menu bar brings up
this menu.
</p>

<p>
<center>
<img src="jmol_menubar_menu.png">
</center>
</p>

<a name="jmol_popup_menu"></a>
<h3>Jmol Popup Menu</h3>

<p>
Right-clicking in the structure (Jmol) view brings up this menu.
</p>

<p>
<center>
<img src="jmol_popup_menu.png">
</center>
</p>

<a name="jmol_mouse"></a>
<h3>Jmol Mouse Functions</h3>

<ul>
<li><b>Drag, left button</b>: rotate object
<li><b>Alt-drag, left button (vertically)</b>: enlarge or shrink object
<li><b>Alt-drag, left button (horizontally)</b>: rotate object around
  axis normal to screen
<li><b>Drag, middle button (vertically)</b>: enlarge or shrink object
<li><b>Drag, middle button (horizontally)</b>: rotate object around axis
  normal to screen
<li><b>Control-drag, right button</b>: translate object
<li><b>Scroll wheel</b>: enlarge or shrink object
</ul>

<!-- $Id$ -->

</body>
</html>
