'\" t
.TH inparse 1 "24 May 1996" "CIIR, UMass" "INQUERY Document Retrieval"
.SH NAME
inparse - Create an intermediate
.B INQUERY
inverted database file from a collection data file.
.SH SYNOPSIS
.B inparse 
.I 
database collection
.RB [ \-stop ]
.RB [ \-nostop ]
.RB [ \-stoplist
.IR stopfile ]
.RB [ \-type
.IR format-type ]
.RB [ \-stemmer
.IR stemming-function ]
.RB [ \-spanish ]
.RB [ \-japanese ]
.RB [ \-nostem ]
.RB [ \-case ]
.RB [ \-recog ]
.RB [ \-norecog ]
.RB [ \-use_recog 
.IR recog-name ]
.RB [ \-skip_recog 
.IR recog-name ]
.RB [ \-fields ]
.RB [ \-nofields ]
.RB [ \-comp ]
.RB [ \-nocomp ]
.RB [ \-terms ]
.RB [ \-termfile
.IR [ term-file ]]
.RB [ \-notermfile ]
.RB [ \-bufsize
.IR float ]
.RB [ \-tmpfile
.IR basename ]
.RB [ \-cr_on ]
.RB [ \-cr_off ]
.RB [ \-continue ]
.RB [ \-infind 
.IR concept:feature]
.RB [ \-infind_ratio
.IR "int1":"int2" ]
.RB [ \-qbs ]

.SH DESCRIPTION 
.B inparse
is part of the 
.B INQUERY Document Retrieval
system which includes programs to build
.B INQUERY
databases and retrieve documents relevant to a user's query.
.PP
The
.B inparse
program builds an intermediate inverted file
.RI ( .imd )
for the collection data file listed on the command line.
.I .imd
files can be later merged together using
.BR merge_btl (1)
to create a complete
.B INQUERY
database.
.PP
The program is also capable of producing field index transaction files
.RI ( .imf ) 
for the fields defined within the document format for the collection.
.PP
.BR inparse 's
input is a document collection; the document structure is defined by
the document "type" (set using the -type option below).  The default
type is a simple SGML format.  Other types available are "cacm_dots",
"html", "email", and simple "file" formats.
.PP
The minimal form of an SGML document acceptable to 
.B inparse
contains the following SGML tags:
.PP
.RS 1i
<DOC>
.br
<DOCNO> 
.I document id string
</DOCNO>
.br
<TEXT>
.br
.RS 1i
.I
document text
.RE
.br
</TEXT>
.br
</DOC>
.RE
.PP
Many other tags are recognized by
.B inparse
to define titles, authors, dates, etc.
.PP
See
.B FILES
below for output files generated by
.BR inparse .
.SH OPTIONS
.BR inparse 's
first argument must be the name of the database to be created (without
any extension).  The database name may include a leading path pointing
the output files to another directory.  Database files and
intermediate files will be built in the directory specified by the
first argument.  The second argument must be the collection file.
Options on the command line can be given in any order.  See
.B EXAMPLES
below.
.TP
.B \-stop 
Test all word occurences for presence on the stopword
list.  Words which are stopwords will be discarded.
This is the default.
.TP
.B \-nostop
Do not test for stopwords.  This will speed processing
but result in a larger term dictionary and inverted file.
.TP
.BI \-stoplist " stopfile"
Use the file 
.I stopfile
for defining words to be excluded from the inverted file.  A default
list will be used if one is not defined.  The default list is defined
as 
.BR $DOCSTOPS/default.stp .
.TP
.BI \-type " data-format"
The datafile contains documents of type 
.I data-format.
The default is "sgml".
.TP
.BI \-stemmmer " stemmer-name"
Perform word stemming using the specified stemming function.  There
are currently three possible 
.I stemmer-name
values: 
.I kstem 
(default), 
.I porter
and 
.I spanish.

.TP
.B \-spanish
Use the spanish stemmer and spanish default stopword list.  This is 
equivalent to defining "-stemmer spanish" and 
"-stoplist $DOCSTOPS/spanish.stp".
.TP
.B \-nostem
Disable stemming of words.
.TP
.B \-case
Preserve case.  This means stopping and stemming will be disabled.
For example, "LaTex" will be saved as "LaTex" instead of "latex"
or whatever the stem of that might be if stemming were on.
.TP
.BI \-recog
Run all defined special recognizers on the collection.
Special recognizers are defined by the user for detecting
concepts of special interest such as locations, names,
etc.
.TP
.B \-norecog
Disable all special recognizers.  This is the default.
.TP
.BI \-use_recog " recog-name"
Run the named recognizer irrespective of its default setting in the
special scanner table, spec_scan_tab.c.
.TP
.BI \-skip_recog " recog-name"
Disable the named special recognizer irrespective of its default
setting in the special scanner table, spec_scan_tab.c.
.TP
.B \-fields
Produce a database file named \fIdatabase\fB.ndx\fR.  This file
contains only words in special fields of a document allowing field
based retrieval.
.TP
.B \-nofields
Do not produce field based term transactions.  This is the
default.
.TP
.B \-comp
Use Huffman encoding (compression) of collection file text.  
This allows removal of the file after the database is built,
saving space.
.TP
.B \-nocomp
Do not use compression when building the database.  This is the
default action.
.TP
.B \-terms
Produce a list of all terms encountered and their position numbers.
The list will be in alphabetic order for each document.
Useful for debugging purposes.
.TP
.BI \-termfile " term-file"
Write a file of terms.  If
.I term-file
is not specified the file name "termfile"
will be used.  This is useful for debugging purposes.
.TP
.B \-notermfile
Do not create a file of terms.  This is the default.
.TP
.BI \-bufsize " number"
Define the internal term buffer size, where
.I number
is the number of bytes to allocate in megabytes.  Possible values are
dependent on the amount of available memory.
.I Number
may be specified as a floating point number, e.g.,
.BR "\-buffer 1.4 " ,
to specify 1.4MB of memory.  The default value is 10MB.
.TP
.BI \-tmpfile " basename"
Define basename of the intermediate files to be produced.  By default
this is the same as the database name.
.TP
.BI \-cr_on
Turn crash recovery on.
.TP
.BI \-cr_off
Turn crash recover off.  This is the default.
.TP
.BI \-continue
Continue processing the collection file after a crash when crash 
recovery was active.
.TP
.BI \-infind " concept:feature"
Build an intermediate 
.I ( .fnd )
file that is used by the
.B build_infinder
program for building
.B InFinder 
concept databases.  The
.I concept
component may be any special recognizer output type such as 
"company", "person", "location" or others.  The most common 
type is "nounphrase".  The
.I feature
component may also be a special recognizer type, but is typically
"terms" surrounding the 
.I concept.
For example
.B \-infind nounphrase:terms
is a typically very useful combination.
See 
.B " build_infinder" (1)
and 
.B " sysadmin.doc
for details.
.TP
.BI \-infind_ratio " int1:int2"
The document "sampling" ratio for building
.B InFinder
concept databases.  Use only 
.I int1
out of every 
.I intb
documents in producing the
.B InFinder
intermediate file.
.TP
.BI \-qbs
Process collection file to support 
.B query based stemming.
This will create an un-stemmed database with a stem table containing term
variants for each term encountered, allowing for selected conflation at
query time.
.SH FILES
.PP
The output files of this program will be:
.PP
.RS
.TS
tab(/);
lB lB
cw(2i) s
lI  l.
File Extension/Description
=
Database Files
_
db/data base file used for document retrieval
shd/stopword hashed dictionary
inf/collection info
ndx/the inverted file for field based terms
btl/the inverted file for normal terms
.T&
c s
lI  l.
Intermediate Files
_
imd/intermediate inverted file
map/directory pointers into the imd file
imf/intermediate data for fields
fmp/directory pointers into the imf file
.TE
.RE
.PP
All intermediate files may be deleted once the complete
.B INQUERY
database is built successfully.  See
.B NOTE
below.
.SH EXAMPLES
.PP
1.  The following command will process the collection,
.BR mycollection.dat ,
and create some of the files for database
.IR mydb :
.PP
    %
.B inparse \ mydb \ mycollection.dat
.PP
The database output files will be:
.BR mydb.db , " mydb.shd" " and" " mydb.inf" .
The intermediate files will be:
.BR mydb.imd " and " mydb.map .
All output files will be in the current directory since
.B mydb
is specified without a leading path.
.PP
2.  The following command uses the 
.B \-fields
option and places the intermediate files in a separate directory (this
might be needed to prevent a disk from filling up).
.PP
    %
.B inparse /data1/db/abc docs/x.dat \-fields \-tmpfile /data2/tmp/x
.PP
The database output files will be:
.BR abc.db , " abc.shd" ,
.BR abc.inf " and" " abc.ndx" 
found in /data1/db.
The intermediate files will be:
.BR x.imd , " x.map" , " x.imf" " and"
.BR x.fmp 
found in the /data2/tmp directory.
It does not matter that the collection or the final database are not
in the current working directory.
.PP
3. The following command will process a file of email messages (of the
format found in UNIX system mail-boxes) using the kstem stemmer.
.PP
   %
.B inparse db/my-mail /var/spool/mail/me \-type email
.B \-stemmer kstem
.PP
.SH NOTE
To create a complete, merged database the general procedure would be
to run
.B inparse
once for each collection and then
.BR merge_btl (1)
once (twice, if using
.BR \-fields;
once for normal processing and once for fields processing) on the 
output from inparse.  A database can be created in one step using
.BR inbuild (1)
and is the preferred method.  Use
.B inparse
and
.B merge_btl
only if you have memory or disk limitations.
.SH ENVIRONMENT
The following environment variables affect the usage of
.BR inparse :
.TP
.B INQDATA
Directory holding the file,
.BR us-city ,
which contains a list of cities in the Unitied States.  Used by the
city special scanner.
.TP
.B DOCSTOPS
Directory holding the default stop word file,
.BR default.stp .
.TP
.B STEMDIR
Directory holding the kstem data files.  Necessary when using the \-kstem
option.
.SH DIAGNOSTICS
Exit status is normally 0.
.SH "BUGS"
Send bug reports to 
.B inquery-bugs@cs.umass.edu.
.SH SEE ALSO
.BR inbuild (1), " merge_btl" (1), " inquery" (1), " inrecover" (1)
and
.B sysadmin.doc
in the documentation directory of the
.B INQUERY 
release.
