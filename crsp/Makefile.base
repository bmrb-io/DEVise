#  ========================================================================
#  DEVise Data Visualization Software
#  (c) Copyright 1992-1996
#  By the DEVise Development Group
#  Madison, Wisconsin
#  All Rights Reserved.
#  ========================================================================
#
#  Under no circumstances is this software to be copied, distributed,
#  or altered in any way without prior permission from the DEVise
#  Development Group.

#  Makefile for crsp code.

############################################################

#  $Id$

#  $Log$
#  Revision 1.10  1996/08/12 18:43:26  flisakow
#    Makefiles changed to use AR and RANLIB vars from Makefile.common.
#
#  Revision 1.9  1996/08/06 20:11:28  wenger
#  Set up makefiles to easily compile with -g flag; other cleanup of
#  makefiles.
#

############################################################

include ../../Makefile.common

CFLAGS = $(ARCH_FLAGS) -I../../graphics -I../../graphics.new \
	-I../../tape -fexternal-templates -Wall -Wno-unused $(OPTFLAG)

LDFLAGS = $(ARCH_LDFLAGS) -L. -lcrsp -L../tape -ltape $(ARCH_LDPOST)

LIBSRC	= sec.C cal.C crsp_extract.C

LIBOBJ	= $(LIBSRC:.C=.o)

TESTSRC = crsp_index.C main.C

TESTOBJ = $(TESTSRC:.C=.o)

ALLSRC	= $(LIBSRC) $(TESTSRC) 

LIBNAME = libcrsp.a

all: $(LIBNAME)
lib: $(LIBNAME)

$(LIBNAME): $(LIBOBJ)
	$(AR) cr $@ $(LIBOBJ)
	$(RANLIB) $@

main:	main.o $(LIBNAME) ../tape/libtape.a
	$(CC) -o $@ $@.o ../graphics/ExitClean.o $(LDFLAGS)

crsp_index: crsp_index.o $(LIBNAME) ../tape/libtape.a
	$(CC) -o $@ $@.o ../graphics/ExitClean.o $(LDFLAGS)

.PHONY: clean mostlyclean

clean: mostlyclean
	-rm $(LIBNAME) main crsp_index

mostlyclean:
	-rm $(LIBOBJ) $(TESTOBJ)
