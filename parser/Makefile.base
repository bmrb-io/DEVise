CC = g++
CFLAGS = $(ARCH_FLAGS)

ALLSRC = main.c parse.c codegen.c

parser: main.o parse.o lex.yy.o codegen.o
	$(CC) $(ARCH_LDFLAGS) -o parser main.o parse.o codegen.o lex.yy.o \
		-ll $(ARCH_LDPOST)

lex.yy.o: lex.yy.c

lex.yy.c: scan.lex tokens.h
	lex $(VPATH)/scan.lex
