#!/bin/csh -f
#=========================================================================
# Script to automatically update the visual filter of the given view in
# the given session to its 'home' value.

# $Id$

#=========================================================================

if ($#argv != 2) then
  echo "Usage: update_filter <session> <view>"
  echo "Note: session must be full absolute path of session file"
else
  set session = $1
  set view = "$2"

  set batchfile = /tmp/update_filter.batch
  \rm $batchfile
  touch $batchfile
  echo "DEVise changeMode 1" >> $batchfile
  echo "DEVise openSession $session" >> $batchfile
  echo "DEVise viewGoHome {$view}" >> $batchfile
  echo "DEVise saveSession $session 0 0 0" >> $batchfile
  echo "DEVise exit" >> $batchfile

  /p/devise/run/devised.jsdemo -quit 1 &
  sleep 5
  /p/devise/public/bin/deviseb < $batchfile

  \rm $batchfile
endif
